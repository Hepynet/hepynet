[config]
include = /work/share/zprime/train/default.ini

[job]
job_name = high-mass-train-1012
job_type = train
save_dir = /work/run/zprime/high_mass

[array]
arr_path = /data/zprime/arrays
arr_version = 1012
campaign = run2

norm_array = true
bkg_list = ["qcd"]
bkg_key = all
sig_list = ["Zp042", "Zp045", "Zp048", "Zp051", "Zp054", "Zp057", "Zp060", "Zp063", "Zp066", "Zp069", "Zp072", "Zp075"]
sig_key = all_norm

# all features
#selected_features = ["mz1", "ptl1", "ptl2", "ptl3", "ptl4", "etal1", "etal2", "etal3", "etal4", "mz1_mz2", "ptz1", "ptz2", "mzz", "ptzz", "deltarl12", "deltarl34","detal12", "detal34"]

# best choice
selected_features = ["mz1", "ptl1", "ptl2", "ptl3", "ptl4", "mz1_mz2", "ptz1", "ptz2", "mzz", "deltarl12", "deltarl34","detal12", "detal34"]

bkg_sumofweight = 100000
sig_sumofweight = 100000

reset_feature = true
reset_feature_name = mz1
rm_negative_weight_events = true

cut_features = ["quadtype"]
cut_values = [2]
cut_types = ["="]

[model]
model_name = pdnn_model
model_class = Model_Sequential_Flat
layers = 6
nodes = 256
dropout_rate = 0
momentum = 0.5
nesterov = true

test_rate = .2
val_split = .25

learn_rate = 0.0003
learn_rate_decay = 1e-5
batch_size = 128
epochs = 100
sig_class_weight = 1.
bkg_class_weight = 1.

use_early_stop = true
early_stop_monitor = val_loss
early_stop_min_delta = 0
early_stop_patience = 5
early_stop_mode = min
early_stop_restore_best_weights = true

# in older tensorflow version may use "acc"
train_metrics = ["plain_acc"]
train_metrics_weighted = ["accuracy", "mean_squared_error"]

save_model = true

[para_scan]
perform_para_scan = false

[report]
show_report = true
book_mc_data_compare = true
book_kine_study = true